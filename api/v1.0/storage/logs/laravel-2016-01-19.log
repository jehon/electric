[2016-01-19 16:34:29] production.ERROR: exception 'BadMethodCallException' with message 'Call to undefined method Illuminate\Database\Query\Builder::getFieldList()' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:2057
Stack trace:
#0 [internal function]: Illuminate\Database\Query\Builder->__call('getFieldList', Array)
#1 [internal function]: Illuminate\Database\Query\Builder->getFieldList('surgical')
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(943): call_user_func_array(Array, Array)
#3 [internal function]: Illuminate\Database\Eloquent\Builder->__call('getFieldList', Array)
#4 [internal function]: Illuminate\Database\Eloquent\Builder->getFieldList('surgical')
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11201): call_user_func_array(Array, Array)
#6 [internal function]: Illuminate\Database\Eloquent\Model->__call('getFieldList', Array)
#7 [internal function]: App\Bill->getFieldList('surgical')
#8 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11206): call_user_func_array(Array, Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(18): Illuminate\Database\Eloquent\Model::__callStatic('getFieldList', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(18): App\Bill::getFieldList('surgical')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportActivityController->index('2014-01')
#12 [internal function]: App\Http\Controllers\ReportController->monthly()
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('monthly', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), 'monthly')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'monthly')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'monthly')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}  
[2016-01-19 16:34:33] production.ERROR: exception 'BadMethodCallException' with message 'Call to undefined method Illuminate\Database\Query\Builder::getFieldList()' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php:2057
Stack trace:
#0 [internal function]: Illuminate\Database\Query\Builder->__call('getFieldList', Array)
#1 [internal function]: Illuminate\Database\Query\Builder->getFieldList('surgical')
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(943): call_user_func_array(Array, Array)
#3 [internal function]: Illuminate\Database\Eloquent\Builder->__call('getFieldList', Array)
#4 [internal function]: Illuminate\Database\Eloquent\Builder->getFieldList('surgical')
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11201): call_user_func_array(Array, Array)
#6 [internal function]: Illuminate\Database\Eloquent\Model->__call('getFieldList', Array)
#7 [internal function]: App\Bill->getFieldList('surgical')
#8 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11206): call_user_func_array(Array, Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(18): Illuminate\Database\Eloquent\Model::__callStatic('getFieldList', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(18): App\Bill::getFieldList('surgical')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportActivityController->index('2014-01')
#12 [internal function]: App\Http\Controllers\ReportController->monthly()
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('monthly', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), 'monthly')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'monthly')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'monthly')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}  
[2016-01-19 16:40:25] production.ERROR: exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'surgical_Burn_release' in where clause is ambiguous' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(55): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(55): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportActivityController->index('2014-01')
#11 [internal function]: App\Http\Controllers\ReportController->monthly()
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('monthly', Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), 'monthly')
#15 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#16 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#17 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'monthly')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'monthly')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#24 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#28 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#29 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#32 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#38 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#41 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#44 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#47 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#50 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#51 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#52 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#56 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#57 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'surgical_Burn_release' in where clause is ambiguous (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < bills.Date) as oldPatient
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (FIELD(:center2, '', bills.Center) > 0) 
        AND (FIELD(:examiner3, '', bills.ExaminerName) > 0) 
        AND (surgical_Burn_release > 0) OR (surgical_PMR_club_club_foot_bi > 0) OR (surgical_PMR_club_foot > 0) OR (surgical_Pin_removal > 0) OR (surgical_burn_little_release > 0) OR (surgical_epiphysiodesis > 0) OR (surgical_epiphysiodesis_bi > 0) OR (surgical_osteotomy > 0) OR (surgical_osteotomy_bi > 0) OR (surgical_percutaneous_AL_club_foot > 0) OR (surgical_percutaneous_achil_tenotomy_bi_cdc > 0) OR (surgical_percutaneous_achil_tenotomy_bi_cmosh > 0) OR (surgical_percutaneous_achil_tenotomy_uni_cdc > 0) OR (surgical_polio_AL > 0) OR (surgical_polio_achileus_Achileus_lenthening_bi > 0) OR (surgical_other_operation > 0 )
      ORDER BY bills.id )' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(55): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(55): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportActivityController->index('2014-01')
#9 [internal function]: App\Http\Controllers\ReportController->monthly()
#10 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('monthly', Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), 'monthly')
#13 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#15 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#16 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'monthly')
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'monthly')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#22 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#36 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#55 {main}  
[2016-01-19 16:40:34] production.ERROR: exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'surgical_Burn_release' in where clause is ambiguous' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(53): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(53): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportActivityController->index('2014-01')
#11 [internal function]: App\Http\Controllers\ReportController->monthly()
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('monthly', Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), 'monthly')
#15 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#16 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#17 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'monthly')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'monthly')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#24 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#27 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#28 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#29 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#30 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#32 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#38 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#41 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#44 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#47 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#50 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#51 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#52 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#56 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#57 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'surgical_Burn_release' in where clause is ambiguous (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < bills.Date) as oldPatient
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (FIELD(:center2, '', bills.Center) > 0) 
        AND (FIELD(:examiner3, '', bills.ExaminerName) > 0) 
        AND (surgical_Burn_release > 0) OR (surgical_PMR_club_club_foot_bi > 0) OR (surgical_PMR_club_foot > 0) OR (surgical_Pin_removal > 0) OR (surgical_burn_little_release > 0) OR (surgical_epiphysiodesis > 0) OR (surgical_epiphysiodesis_bi > 0) OR (surgical_osteotomy > 0) OR (surgical_osteotomy_bi > 0) OR (surgical_percutaneous_AL_club_foot > 0) OR (surgical_percutaneous_achil_tenotomy_bi_cdc > 0) OR (surgical_percutaneous_achil_tenotomy_bi_cmosh > 0) OR (surgical_percutaneous_achil_tenotomy_uni_cdc > 0) OR (surgical_polio_AL > 0) OR (surgical_polio_achileus_Achileus_lenthening_bi > 0) OR (surgical_other_operation > 0 )
      ORDER BY bills.id )' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(53): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportActivityController.php(53): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportActivityController->index('2014-01')
#9 [internal function]: App\Http\Controllers\ReportController->monthly()
#10 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('monthly', Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), 'monthly')
#13 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#15 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#16 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportActivityController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'monthly')
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'monthly')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#22 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#25 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#36 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#55 {main}  
[2016-01-19 19:40:36] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        -- bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults as T WHERE T.patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots as T WHERE T.patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults as T WHERE T.patient_id = patients.id)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:40:38] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        -- bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults as T WHERE T.patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots as T WHERE T.patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults as T WHERE T.patient_id = patients.id)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:40:47] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        -- bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults as T WHERE T.patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots as T WHERE T.patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults as T WHERE T.patient_id = patients.id)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:41:52] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        -- bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:42:45] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        -- bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:42:46] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,
        -- bills.ExaminerName as ExaminerName,
        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:42:55] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:42:56] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:43:54] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1)
        AND (bills.Date BETWEEN '2014-01-01' AND '2014-01-31')
   ' at line 41 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN ((
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:44:10] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1) LIMIT 1
          ) AS TConsults)
      WHERE (1 = 1)
        AND ' at line 39' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1) LIMIT 1
          ) AS TConsults)
      WHERE (1 = 1)
        AND ' at line 39 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN ((
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC WHERE (1 = 1) LIMIT 1
          ) AS TConsults)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:44:24] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1) ORDER BY Date DESC LIMIT 1
          ) AS TConsults)
      WHERE (' at line 39' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1) ORDER BY Date DESC LIMIT 1
          ) AS TConsults)
      WHERE (' at line 39 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN ((
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) WHERE (1 = 1) ORDER BY Date DESC LIMIT 1
          ) AS TConsults)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:45:30] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1) ORDER BY Date DESC LIMIT 1
          ) AS TConsults ON (1= 1)
    ' at line 39' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (1 = 1) ORDER BY Date DESC LIMIT 1
          ) AS TConsults ON (1= 1)
    ' at line 39 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) WHERE (1 = 1) ORDER BY Date DESC LIMIT 1
          ) AS TConsults ON (1= 1)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:45:42] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults ON (1= 1)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 19:46:07] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults WHERE patient_id = patients.id ORDER BY Date DESC LIMIT 1)
            ) ORDER BY Date DESC LIMIT 1
          ) AS TConsults ON (1= 1)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:00:32] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
            (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patients.id = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
            ) ORDER BY Date DESC
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(61): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:00:58] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patients.id = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:00:59] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patients.id = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:00:59] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patients.id = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:01:07] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON patients.id = ricket_consults.patient_id)
              UNION
              (' at line 33' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ON patients.id = ricket_consults.patient_id)
              UNION
              (' at line 33 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults ON patients.id = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:01:21] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'having clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'having clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults HAVING patients.id = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:04:30] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'patients.id' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE patients.id = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:04:41] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'pid' in 'where clause'' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'pid' in 'where clause' (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults WHERE pid = ricket_consults.patient_id)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults ON (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  
[2016-01-19 20:05:01] production.ERROR: exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bill' at line 38' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:321
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(321): PDOStatement->execute(Array)
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(644): Illuminate\Database\Connection->Illuminate\Database\{closure}(Object(Illuminate\Database\MySqlConnection), 'SELECT\n        ...', Array)
#2 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#3 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#4 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#6 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#7 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#10 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#11 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#12 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#14 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#16 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#23 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#25 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#26 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#27 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#28 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#29 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#30 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#33 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#37 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#39 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#40 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#42 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#45 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#48 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#49 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#51 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#53 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 {main}

Next exception 'Illuminate\Database\QueryException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bill' at line 38 (SQL: SELECT
        bills.id as bid,
        patients.id as pid,
        bills.Date as Date,

        bills.Center as Center,
        CONCAT(patients.entryyear, '-', patients.entryorder) as patient_reference,
        patients.Name as patient_name,
        patients.yearofbirth,
        patients.Sex,
        bills.sl_familySalary,
        bills.sl_numberOfHouseholdMembers,
        bills.Sociallevel,
        patients.Pathology,
        TRIM(CONCAT(IF(bills.consult_CDC_consultation_physio, 'CsP ', ''), IF(bills.consult_CDC_consultation_Doctor, 'CD ', ''), IF(bills.consult_field_visit, 'FV ', ''), IF(bills.consult_home_visit, 'HV ', ''))) as act,
        TRIM(CONCAT(IF(( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)), 'Med ', ''), IF(( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)), 'WS ', ''), IF(( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)), 'Surg ', ''), IF(bills.other_making_plaster + bills.other_make_long_plaster + bills.other_make_short_plaster, 'Plast ', ''), IF(bills.other_making_dressing, 'Dress ', ''), IF(bills.other_X_Ray, 'XR ', ''), IF(bills.other_physiotherapy, 'Physio ', ''), IF(bills.other_Other_consultation_care, 'Other ', ''))) as treatment,
        ( 0  + (prices.`consult_CDC_consultation_physio` * bills.`consult_CDC_consultation_physio`) + (prices.`consult_CDC_consultation_Bengali_Doctor` * bills.`consult_CDC_consultation_Bengali_Doctor`) + (prices.`consult_CDC_consultation_Doctor` * bills.`consult_CDC_consultation_Doctor`) + (prices.`consult_field_visit` * bills.`consult_field_visit`) + (prices.`consult_home_visit` * bills.`consult_home_visit`) + (prices.`consult_give_appointment` * bills.`consult_give_appointment`) + (prices.`consult_ClubFoot_Follow_up` * bills.`consult_ClubFoot_Follow_up`)) AS price_consult,
              ( 0  + (prices.`medecine_medecine` * bills.`medecine_medecine`) + (prices.`medecine_calcium_30x500mg` * bills.`medecine_calcium_30x500mg`) + (prices.`medecine_vitamineD` * bills.`medecine_vitamineD`)) AS price_medecine,
        ( 0  + (prices.`workshop_BHKAFO_night` * bills.`workshop_BHKAFO_night`) + (prices.`workshop_BHKAFO_walking` * bills.`workshop_BHKAFO_walking`) + (prices.`workshop_UHKAFO_night` * bills.`workshop_UHKAFO_night`) + (prices.`workshop_UHKAFO_walking` * bills.`workshop_UHKAFO_walking`) + (prices.`workshop_BKAFO_night` * bills.`workshop_BKAFO_night`) + (prices.`workshop_BKAFO_walking` * bills.`workshop_BKAFO_walking`) + (prices.`workshop_UKAFO_night` * bills.`workshop_UKAFO_night`) + (prices.`workshop_UKAFO_walking` * bills.`workshop_UKAFO_walking`) + (prices.`workshop_Knee_brace` * bills.`workshop_Knee_brace`) + (prices.`workshop_BAFO_night` * bills.`workshop_BAFO_night`) + (prices.`workshop_BAFO_walking` * bills.`workshop_BAFO_walking`) + (prices.`workshop_UAFO_night` * bills.`workshop_UAFO_night`) + (prices.`workshop_UAFO_walking` * bills.`workshop_UAFO_walking`) + (prices.`workshop_Orthoshoes_with_bar` * bills.`workshop_Orthoshoes_with_bar`) + (prices.`workshop_Orthoshoes_without_bar` * bills.`workshop_Orthoshoes_without_bar`) + (prices.`workshop_DDB_splint` * bills.`workshop_DDB_splint`) + (prices.`workshop_Compensation_sole` * bills.`workshop_Compensation_sole`) + (prices.`workshop_Arch_support` * bills.`workshop_Arch_support`) + (prices.`workshop_Matetarsal_pade` * bills.`workshop_Matetarsal_pade`) + (prices.`workshop_Supinator_corner` * bills.`workshop_Supinator_corner`) + (prices.`workshop_Wirst_splint` * bills.`workshop_Wirst_splint`) + (prices.`workshop_Hand_splint` * bills.`workshop_Hand_splint`) + (prices.`workshop_Finger_splint` * bills.`workshop_Finger_splint`) + (prices.`workshop_Walker_with_wheel` * bills.`workshop_Walker_with_wheel`) + (prices.`workshop_Walker_without_wheel` * bills.`workshop_Walker_without_wheel`) + (prices.`workshop_Crutch_a_pair` * bills.`workshop_Crutch_a_pair`) + (prices.`workshop_Crutch_a_piece` * bills.`workshop_Crutch_a_piece`) + (prices.`workshop_Wheel_chair` * bills.`workshop_Wheel_chair`) + (prices.`workshop_CP_chair` * bills.`workshop_CP_chair`) + (prices.`workshop_CP_standing_table` * bills.`workshop_CP_standing_table`) + (prices.`workshop_Cervical_Collar` * bills.`workshop_Cervical_Collar`) + (prices.`workshop_Abdominal_corset_belt` * bills.`workshop_Abdominal_corset_belt`) + (prices.`workshop_Reparing` * bills.`workshop_Reparing`) + (prices.`workshop_Other_orthodevice` * bills.`workshop_Other_orthodevice`) + (prices.`workshop_BHKAFO_Drop_lock_single_axis` * bills.`workshop_BHKAFO_Drop_lock_single_axis`) + (prices.`workshop_crutch_alumenium` * bills.`workshop_crutch_alumenium`) + (prices.`workshop_chair_china` * bills.`workshop_chair_china`) + (prices.`workshop_mailwalke_brace` * bills.`workshop_mailwalke_brace`) + (prices.`workshop_leg_truction` * bills.`workshop_leg_truction`) + (prices.`workshop_thoracic_brace` * bills.`workshop_thoracic_brace`) + (prices.`workshop_samainto_brace` * bills.`workshop_samainto_brace`) + (prices.`workshop_fracture_brace` * bills.`workshop_fracture_brace`) + (prices.`workshop_smo` * bills.`workshop_smo`) + (prices.`workshop_lifspring_afo` * bills.`workshop_lifspring_afo`)) AS price_workshop,
              ( 0  + (prices.`surgical_osteotomy` * bills.`surgical_osteotomy`) + (prices.`surgical_epiphysiodesis` * bills.`surgical_epiphysiodesis`) + (prices.`surgical_polio_AL` * bills.`surgical_polio_AL`) + (prices.`surgical_percutaneous_AL_club_foot` * bills.`surgical_percutaneous_AL_club_foot`) + (prices.`surgical_PMR_club_foot` * bills.`surgical_PMR_club_foot`) + (prices.`surgical_Burn_release` * bills.`surgical_Burn_release`) + (prices.`surgical_Pin_removal` * bills.`surgical_Pin_removal`) + (prices.`surgical_other_operation` * bills.`surgical_other_operation`) + (prices.`surgical_osteotomy_bi` * bills.`surgical_osteotomy_bi`) + (prices.`surgical_epiphysiodesis_bi` * bills.`surgical_epiphysiodesis_bi`) + (prices.`surgical_polio_achileus_Achileus_lenthening_bi` * bills.`surgical_polio_achileus_Achileus_lenthening_bi`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cmosh` * bills.`surgical_percutaneous_achil_tenotomy_bi_cmosh`) + (prices.`surgical_percutaneous_achil_tenotomy_uni_cdc` * bills.`surgical_percutaneous_achil_tenotomy_uni_cdc`) + (prices.`surgical_percutaneous_achil_tenotomy_bi_cdc` * bills.`surgical_percutaneous_achil_tenotomy_bi_cdc`) + (prices.`surgical_PMR_club_club_foot_bi` * bills.`surgical_PMR_club_club_foot_bi`) + (prices.`surgical_burn_little_release` * bills.`surgical_burn_little_release`)) AS price_surgical,
              ( 0  + (prices.`other_making_plaster` * bills.`other_making_plaster`) + (prices.`other_make_long_plaster` * bills.`other_make_long_plaster`) + (prices.`other_make_short_plaster` * bills.`other_make_short_plaster`) + (prices.`other_making_dressing` * bills.`other_making_dressing`) + (prices.`other_X_Ray` * bills.`other_X_Ray`) + (prices.`other_physiotherapy` * bills.`other_physiotherapy`) + (prices.`other_Other_consultation_care` * bills.`other_Other_consultation_care`) + (prices.`other_microbus` * bills.`other_microbus`) + (prices.`other_CMOSH_follow_up` * bills.`other_CMOSH_follow_up`) + (prices.`other_nutritionalAdvice` * bills.`other_nutritionalAdvice`) + (prices.`other_nutritionalSupport` * bills.`other_nutritionalSupport`) + (prices.`other_group_physiotherapy` * bills.`other_group_physiotherapy`) + (prices.`other_physiotherapy_child` * bills.`other_physiotherapy_child`) + (prices.`other_physiotherapy_adult` * bills.`other_physiotherapy_adult`) + (prices.`other_Other_plaster` * bills.`other_Other_plaster`) + (prices.`other_Other_dressing` * bills.`other_Other_dressing`)) AS price_other,
              bills.total_real as total_real,
              bills.total_asked as total_asked,
              bills.total_paid as total_paid,
        exists(select * from bills as b2 where b2.patient_id = bills.patient_id and b2.Date < :whenFrom12) as oldPatient,
        TConsults.Date AS last_seen,
        TConsults.TreatmentEvaluation AS last_treat_result,
        TConsults.TreatmentFinished AS last_treat_finished
      FROM bills
          JOIN patients ON bills.patient_id = patients.id
          JOIN prices ON bills.price_id = prices.id
          LEFT OUTER JOIN (
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM ricket_consults)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM club_foots)
              UNION
              (SELECT id, patient_id, Date, TreatmentEvaluation, TreatmentFinished FROM other_consults)
          ) AS TConsults WHERE (TConsults.patient_id = patients.id)
      WHERE (1 = 1)
        AND (bills.Date BETWEEN :when0From AND :when0To)
        AND (1 = 1)
      ORDER BY bills.id)' in /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php:651
Stack trace:
#0 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(611): Illuminate\Database\Connection->runQueryCallback('SELECT\n        ...', Array, Object(Closure))
#1 /var/www/cryptomedic/api/v1.0/vendor/laravel/framework/src/Illuminate/Database/Connection.php(324): Illuminate\Database\Connection->run('SELECT\n        ...', Array, Object(Closure))
#2 [internal function]: Illuminate\Database\Connection->select('SELECT\n        ...', Array)
#3 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11333): call_user_func_array(Array, Array)
#4 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->__call('select', Array)
#5 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(6011): Illuminate\Database\DatabaseManager->select('SELECT\n        ...', Array)
#6 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\Facade::__callStatic('select', Array)
#7 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportSurgicalController.php(59): Illuminate\Support\Facades\DB::select('SELECT\n        ...', Array)
#8 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(52): App\Http\Controllers\ReportSurgicalController->index('2014-01')
#9 /var/www/cryptomedic/api/v1.0/app/Http/Controllers/ReportController.php(24): App\Http\Controllers\ReportController->monthly()
#10 [internal function]: App\Http\Controllers\ReportController->byTiming('month')
#11 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8836): call_user_func_array(Array, Array)
#12 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8905): Illuminate\Routing\Controller->callAction('byTiming', Array)
#13 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8885): Illuminate\Routing\ControllerDispatcher->call(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), 'byTiming')
#14 [internal function]: Illuminate\Routing\ControllerDispatcher->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#15 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#16 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#17 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#18 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8886): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(8871): Illuminate\Routing\ControllerDispatcher->callWithinStack(Object(App\Http\Controllers\ReportSurgicalController), Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'byTiming')
#20 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7825): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request), 'App\\Http\\Contro...', 'byTiming')
#21 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7796): Illuminate\Routing\Route->runWithCustomDispatcher(Object(Illuminate\Http\Request))
#22 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7449): Illuminate\Routing\Route->run(Object(Illuminate\Http\Request))
#23 [internal function]: Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#24 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#25 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/HasPermission.php(23): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 [internal function]: App\Http\Middleware\HasPermission->handle(Object(Illuminate\Http\Request), Object(Closure), 'reports.execute')
#27 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#28 /var/www/cryptomedic/api/v1.0/app/Http/Middleware/Authenticated.php(46): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 [internal function]: App\Http\Middleware\Authenticated->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#31 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#32 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#33 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7450): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#34 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7438): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#35 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(7423): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2303): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 [internal function]: Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#38 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9547): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#39 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12867): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#40 [internal function]: Illuminate\View\Middleware\ShareErrorsFromSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#42 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(11490): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#43 [internal function]: Illuminate\Session\Middleware\StartSession->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#45 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12608): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#46 [internal function]: Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse->handle(Object(Illuminate\Http\Request), Object(Closure))
#47 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#48 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(12547): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#49 [internal function]: Illuminate\Cookie\Middleware\EncryptCookies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9539): call_user_func_array(Array, Array)
#51 [internal function]: Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#52 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(9529): call_user_func(Object(Closure), Object(Illuminate\Http\Request))
#53 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2250): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#54 /var/www/cryptomedic/api/v1.0/bootstrap/cache/compiled.php(2233): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#55 /var/www/cryptomedic/api/v1.0/public/index.php(54): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#56 {main}  

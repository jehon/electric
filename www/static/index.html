<!DOCTYPE html>
<html>
  <head>
    <title>Your electric installation</title>
    <meta name="description" content="charset:utf-8"/>
    <meta charset='utf-8'/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!-- - - - - - - - - - - - - -->
    <!-- CSS - globals           -->
    <!-- - - - - - - - - - - - - -->
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">

    <!-- - - - - - - - - - - - - -->
    <!-- CSS - custom            -->
    <!-- - - - - - - - - - - - - -->
    <link rel="stylesheet" type="text/css" href="css/application.css">

    <!-- - - - - - - - - - - - - -->
    <!-- JS - globals            -->
    <!-- - - - - - - - - - - - - -->
    <!-- <script type='text/javascript' src='../bower_components/webcomponentsjs/webcomponents-lite.js'></script> <!- - web components v0--> 
    <!-- <script type='text/javascript' src='bower_components/shadydom/cloudydom.min.js'></script> <!- - web components v1 - shadyDom - -> -->
    <script type='text/javascript' src='bower_components/custom-elements/custom-elements.min.js'></script> <!-- web components v1 -->

    <!-- - - - - - - - - - - - - -->
    <!-- JS - custom             -->
    <!-- - - - - - - - - - - - - -->
    <script type='text/javascript' src='class/DrawReference.js'></script>
    <script type='text/javascript' src='class/Drawer.js'></script>

    <script type='text/javascript' src='class/Builder.js'></script>
    <script type='text/javascript' src='class/MigrationBuilder.js'></script>
    <script type='text/javascript' src='class/SingleElementBuilder.js'></script>
    <script type='text/javascript' src='class/NameBuilder.js'></script>
    <script type='text/javascript' src='class/PositionBuilder.js'></script>

    <script type='text/javascript' src='class/findByUUID.js'></script>
    <script type='text/javascript' src='class/dumpSchema.js'></script>

    <script type='text/javascript' src='helpers/away.js'></script>
    <script type='text/javascript' src='helpers/config.js'></script>
    <script type='text/javascript' src='helpers/getDataFromImageUrl.js'></script>

    <script type='text/javascript' src='components/Legend.js'></script>
    <script type='text/javascript' src='components/SchemaPosition.js'></script>
  </head>
  <body>

  <h1>Legend</h1>
  <style>
    x-legend {
      width: 100%;
    }
  </style>
  <div class="container-fluid"> 
  <h1>Schema filiaire</h1>

  <h1>Plan cave</h1>
  <schema-position value='cave'></schema-position>

  <h1>Plan RDC</h1>
  <div id='plan_rdc'></div>

  <h1>Plan Etage</h1>
  <div id='plan_etage'></div>

  <h1>Plan Grenier</h1>
  <div id='plan_grenier'></div>

  <h1>Plan Exterieurs</h1>
  <div id='plan_exterieurs'></div>

  <h1>LÃ©gende</h1>
    <x-legend value='P'></x-legend>
    <x-legend value='S' options='{}'></x-legend>
    <x-legend value='S' options='{ "bipol": true }'></x-legend>
    <x-legend value='S' options='{ "bidir": true }'></x-legend>
    <x-legend value='S' options='{ "inverter": true }'></x-legend>
    <x-legend value='S' options='{ "variator": true }'></x-legend>
    <x-legend value='S' options='{ "light": true }'></x-legend>

    <x-legend value='Neon'></x-legend>

    <x-legend value='L'></x-legend>
    <x-legend value='Disj'></x-legend>

    <x-legend value='Heater'></x-legend>
    <x-legend value='Boiler'></x-legend>

    <x-legend value='CookingPlates'></x-legend>
    <x-legend value='KNX'></x-legend>
    <x-legend value='Bridge'></x-legend>
    <x-legend value='Transfo'></x-legend>
    <x-legend value='Hotte'></x-legend>
  </div>

  </body>
  <script>
  fetch('/api/v0.1/server.php').then(function(response) {

    // console.log("fetch response: ", response);
    response.json().then((ourschema) => {

      (new MigrationBuilder(ourschema.schema)).build();


      (new NameBuilder(ourschema.schema)).build();
      (new SingleElementBuilder(ourschema.schema)).build();

      document.querySelectorAll("schema-filiaire, schema-position").forEach(el => {
          console.log("Setting schema on ", el, " to ", ourschema);
          el.setSchema(ourschema.schema);
      })

      // ReactDOM.render(
      //   <SchemaFiliaire schema={state.oschema}/>,
      //   document.getElementById('schema')
      // );
    });
  });
  </script>
</html>
